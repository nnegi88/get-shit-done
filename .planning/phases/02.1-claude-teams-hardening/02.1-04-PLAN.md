---
phase: 02.1-claude-teams-hardening
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - get-shit-done/bin/gsd-tools.js
  - agents/gsd-executor.md
  - get-shit-done/workflows/execute-phase.md
autonomous: true

must_haves:
  truths:
    - "The orchestrator monitoring loop displays a progress table showing each executor's current task and completion percentage"
    - "Executors write progress to .planning/.progress/<agent>.json as they work"
    - "Progress data includes plan ID, current task number, total tasks, and status"
  artifacts:
    - path: "get-shit-done/bin/gsd-tools.js"
      provides: "progress write and progress read commands"
      contains: "progress"
    - path: "agents/gsd-executor.md"
      provides: "Progress reporting behavior for executors"
      contains: ".progress"
    - path: "get-shit-done/workflows/execute-phase.md"
      provides: "Progress table rendering in monitoring loop"
      contains: "progress"
  key_links:
    - from: "agents/gsd-executor.md"
      to: "get-shit-done/bin/gsd-tools.js"
      via: "Executor calls gsd-tools progress write after each task"
      pattern: "progress write"
    - from: "get-shit-done/workflows/execute-phase.md"
      to: "get-shit-done/bin/gsd-tools.js"
      via: "Orchestrator calls gsd-tools progress read to render table"
      pattern: "progress read"
---

<objective>
Add progress tracking infrastructure using `.planning/.progress/<agent>.json` files, with gsd-tools commands to write and read progress, and a monitoring loop that renders a progress table.

Purpose: No visibility into what individual executors are doing during multi-plan execution. Progress files and dashboard provide real-time status.
Output: New gsd-tools.js progress commands, executor progress reporting, and orchestrator progress table rendering.
</objective>

<execution_context>
@/Users/naveennegi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/naveennegi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add progress write/read/clear commands to gsd-tools.js</name>
  <files>get-shit-done/bin/gsd-tools.js</files>
  <action>
Add three new subcommands under a `progress` command group:

1. **`progress write <agent-name> --plan <plan_id> --task <current_task> --total <total_tasks> --status <status>`**
   - Creates/updates `.planning/.progress/<agent-name>.json`
   - Ensures `.planning/.progress/` directory exists (create if not)
   - Writes JSON: `{ agent: name, plan_id, current_task, total_tasks, status: "running"|"completed"|"failed", percent: Math.round(current_task/total_tasks*100), updated_at: ISO timestamp }`
   - File format: one JSON file per agent, overwritten on each write

2. **`progress read`**
   - Reads all `.json` files from `.planning/.progress/`
   - Returns JSON: `{ agents: [ { agent, plan_id, current_task, total_tasks, percent, status, updated_at } ], summary: "N agents: X running, Y completed, Z failed" }`
   - If directory doesn't exist or is empty, returns `{ agents: [], summary: "No progress data" }`

3. **`progress clear`**
   - Removes all files in `.planning/.progress/` directory
   - Returns `{ cleared: true, files_removed: N }`
   - Called by orchestrator at start and end of phase execution

Register all three in the command dispatch following existing patterns. Use existing error handling patterns (try/catch with appropriate error codes).
  </action>
  <verify>
Run progress write, read, and clear commands manually:
```bash
node gsd-tools.js progress write "executor-01" --plan "02.1-01" --task 1 --total 3 --status running
node gsd-tools.js progress read
node gsd-tools.js progress clear
```
Verify JSON output is correct. Run `npm test` for regressions.
  </verify>
  <done>progress write/read/clear commands work correctly, creating .planning/.progress/ files and reading them back as structured JSON.</done>
</task>

<task type="auto">
  <name>Task 2: Add progress reporting to gsd-executor.md and progress table to execute-phase.md</name>
  <files>agents/gsd-executor.md, get-shit-done/workflows/execute-phase.md</files>
  <action>
In `gsd-executor.md`, in the `<team_communication_protocol>` section under "Executor-Specific Team Behavior", add:

```markdown
### Progress Reporting
- After completing each task, report progress:
  \```bash
  node /Users/naveennegi/.claude/get-shit-done/bin/gsd-tools.js progress write "{your-executor-name}" --plan "{plan_id}" --task {completed_task_num} --total {total_tasks} --status running
  \```
- On plan completion (after SUMMARY.md), update status to "completed":
  \```bash
  node /Users/naveennegi/.claude/get-shit-done/bin/gsd-tools.js progress write "{your-executor-name}" --plan "{plan_id}" --task {total_tasks} --total {total_tasks} --status completed
  \```
- On failure, update status to "failed":
  \```bash
  node /Users/naveennegi/.claude/get-shit-done/bin/gsd-tools.js progress write "{your-executor-name}" --plan "{plan_id}" --task {current_task} --total {total_tasks} --status failed
  \```
```

In `execute-phase.md`, in the "Orchestrator monitoring in team mode" section:

1. At the start of phase execution, clear stale progress data:
   ```bash
   node /Users/naveennegi/.claude/get-shit-done/bin/gsd-tools.js progress clear
   ```

2. In the monitoring loop, after checking TaskList(), read and display progress:
   ```bash
   PROGRESS=$(node /Users/naveennegi/.claude/get-shit-done/bin/gsd-tools.js progress read)
   ```

   Render as table:
   ```
   ## Execution Progress

   | Executor | Plan | Progress | Status |
   |----------|------|----------|--------|
   | executor-01 | 02.1-01 | ███░░ 2/3 (67%) | running |
   | executor-02 | 02.1-02 | █████ 3/3 (100%) | completed |
   ```

   Use progress bar characters: `█` for completed, `░` for remaining (5 chars total).

3. At the end of phase execution (after verification), clear progress data:
   ```bash
   node /Users/naveennegi/.claude/get-shit-done/bin/gsd-tools.js progress clear
   ```
  </action>
  <verify>
Read gsd-executor.md and verify progress reporting instructions exist. Read execute-phase.md and verify progress table rendering in monitoring loop with clear at start and end.
  </verify>
  <done>Executors report progress after each task. Orchestrator renders progress table in monitoring loop. Progress is cleared at start and end of phase execution.</done>
</task>

</tasks>

<verification>
1. `npm test` passes with no regressions
2. progress write/read/clear commands produce correct JSON
3. gsd-executor.md includes progress reporting after each task
4. execute-phase.md monitoring loop renders progress table
5. Progress cleared at start and end of execution
</verification>

<success_criteria>
Orchestrator monitoring loop displays a progress table showing each executor's current task and completion percentage.
</success_criteria>

<output>
After completion, create `.planning/phases/02.1-claude-teams-hardening/02.1-04-SUMMARY.md`
</output>
